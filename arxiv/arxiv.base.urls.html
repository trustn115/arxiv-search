
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>arxiv.base.urls package &#8212; arXiv base 0.2 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="arxiv.base.urls.tests package" href="arxiv.base.urls.tests.html" />
    <link rel="prev" title="arxiv.base.tests.test_urls module" href="arxiv.base.tests.test_urls.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-arxiv.base.urls">
<span id="arxiv-base-urls-package"></span><h1>arxiv.base.urls package<a class="headerlink" href="#module-arxiv.base.urls" title="Permalink to this headline">¶</a></h1>
<p>Helpers for working with URLs in arXiv Flask applications.</p>
<p>This module provides <a class="reference internal" href="#arxiv.base.urls.external_url_handler" title="arxiv.base.urls.external_url_handler"><code class="xref py py-func docutils literal notranslate"><span class="pre">external_url_handler()</span></code></a>, which is attached to Flask
application instances by <a class="reference internal" href="arxiv.base.html#arxiv.base.Base" title="arxiv.base.Base"><code class="xref py py-class docutils literal notranslate"><span class="pre">arxiv.base.Base</span></code></a>. This leverage’s Flask’s
built-in hook for <code class="xref py py-class docutils literal notranslate"><span class="pre">flask.BuildError</span></code> exception handlers, described in
the <code class="xref py py-func docutils literal notranslate"><span class="pre">flask.url_for()</span></code> documentation.</p>
<p>To set a URL for an external (i.e. not provided by thie application) endpoint,
define a variable called <code class="docutils literal notranslate"><span class="pre">URLS</span></code> in your application configuration. <code class="docutils literal notranslate"><span class="pre">URLS</span></code>
should be a list of three-tuples, of the form (<code class="docutils literal notranslate"><span class="pre">endpoint</span> <span class="pre">(str)</span></code>,
<code class="docutils literal notranslate"><span class="pre">path</span> <span class="pre">(str)</span></code>, <code class="docutils literal notranslate"><span class="pre">domain</span> <span class="pre">(str)</span></code>). Paths should use the <a class="reference external" href="http://werkzeug.pocoo.org/docs/0.14/routing/#rule-format">Werkzeug rule format</a>. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">URLS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;/pdf/&lt;arxiv:paper_id&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;arxiv.org&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;twitter&quot;</span><span class="p">,</span> <span class="s2">&quot;/arxiv&quot;</span><span class="p">,</span> <span class="s2">&quot;twitter.com&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;blog&quot;</span><span class="p">,</span> <span class="s2">&quot;/arxiv&quot;</span><span class="p">,</span> <span class="s2">&quot;blogs.cornell.edu&quot;</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>You can load these urls using <code class="xref py py-func docutils literal notranslate"><span class="pre">flask.url_for()</span></code>. For example,
<code class="docutils literal notranslate"><span class="pre">url_for(&quot;pdf&quot;,</span> <span class="pre">paper_id=&quot;1601.00123&quot;)</span></code> should return
<code class="docutils literal notranslate"><span class="pre">https://arxiv.org/pdf/1601.00123</span></code>.</p>
<div class="section" id="using-environment-variables">
<h2>Using environment variables<a class="headerlink" href="#using-environment-variables" title="Permalink to this headline">¶</a></h2>
<p>An alternative approach is to set the endpoint using an environment variable.
Setting <code class="docutils literal notranslate"><span class="pre">ARXIV_FOO_URL</span></code> will define a rule for endpoint <code class="docutils literal notranslate"><span class="pre">foo</span></code> using the
domain and path parsed from the variable’s value. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;ARXIV_BLOG_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;http://blogs.cornell.edu/arxiv&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h2>
<p>URLs can be defined in <a class="reference internal" href="arxiv.base.config.html#module-arxiv.base.config" title="arxiv.base.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">arxiv.base.config</span></code></a>, in environment variables,
and in the configuration of a <code class="xref py py-class docutils literal notranslate"><span class="pre">flask.Flask</span></code> application that uses
<a class="reference internal" href="arxiv.base.html#arxiv.base.Base" title="arxiv.base.Base"><code class="xref py py-class docutils literal notranslate"><span class="pre">arxiv.base.Base</span></code></a>. Preference is given to each of those respective
sources with increasing priority.</p>
<p>This will build URLs with the <code class="docutils literal notranslate"><span class="pre">https</span></code> scheme by default. To use <code class="docutils literal notranslate"><span class="pre">http</span></code>,
set <code class="docutils literal notranslate"><span class="pre">EXTERNAL_URL_SCHEME</span> <span class="pre">=</span> <span class="pre">'http'</span></code> in your configuration.</p>
<dl class="function">
<dt id="arxiv.base.urls.canonical_url">
<code class="descclassname">arxiv.base.urls.</code><code class="descname">canonical_url</code><span class="sig-paren">(</span><em>id</em>, <em>version=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls.html#canonical_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.canonical_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the canonical URL for an arXiv identifier.</p>
<p>This can be done from just the ID because the category is only needed if it
is in the ID. id can be just the id or idv or cat/id or cat/idv.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.external_url_for">
<code class="descclassname">arxiv.base.urls.</code><code class="descname">external_url_for</code><span class="sig-paren">(</span><em>endpoint</em>, <em>**values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls.html#external_url_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.external_url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Like :flask`.url_for`, but builds external URLs based on the config.</p>
<p>This works by loading the configuration variable <code class="docutils literal notranslate"><span class="pre">URLS</span></code> from
<a class="reference internal" href="arxiv.base.config.html#module-arxiv.base.config" title="arxiv.base.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">arxiv.base.config</span></code></a> and from the application on which the blueprint
has been registered, and registering the URL patterns described therein.
Preference is given to URLs defined on the current application. An attempt
is made to avoid adding URL rules for which identical patterns have already
been registered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.external_url_handler">
<code class="descclassname">arxiv.base.urls.</code><code class="descname">external_url_handler</code><span class="sig-paren">(</span><em>err</em>, <em>endpoint</em>, <em>values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls.html#external_url_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.external_url_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to handle failed URL building with <a class="reference internal" href="#arxiv.base.urls.external_url_for" title="arxiv.base.urls.external_url_for"><code class="xref py py-func docutils literal notranslate"><span class="pre">external_url_for()</span></code></a>.</p>
<p>This gets attached to a Flask application via the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">flask.Flask.url_build_error_handlers()</span></code> hook.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arxiv.base.urls.get_url_map">
<code class="descclassname">arxiv.base.urls.</code><code class="descname">get_url_map</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/arxiv/base/urls.html#get_url_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#arxiv.base.urls.get_url_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a <code class="xref py py-class docutils literal notranslate"><span class="pre">werkzeug.routing.Map</span></code> from configured URLs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">Map</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="arxiv.base.urls.tests.html">arxiv.base.urls.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="arxiv.base.urls.tests.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="arxiv.base.urls.tests.test_click_through.html">arxiv.base.urls.tests.test_click_through module</a></li>
<li class="toctree-l3"><a class="reference internal" href="arxiv.base.urls.tests.test_urlize.html">arxiv.base.urls.tests.test_urlize module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="arxiv.base.urls.clickthrough.html">arxiv.base.urls.clickthrough module</a></li>
<li class="toctree-l1"><a class="reference internal" href="arxiv.base.urls.links.html">arxiv.base.urls.links module</a></li>
</ul>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">arXiv base</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">arxiv</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="arxiv.html">arxiv package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metadocs.html">Meta-documentation: How to create documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">arxiv</a><ul>
  <li><a href="arxiv.html">arxiv package</a><ul>
  <li><a href="arxiv.base.html">arxiv.base package</a><ul>
      <li>Previous: <a href="arxiv.base.tests.test_urls.html" title="previous chapter">arxiv.base.tests.test_urls module</a></li>
      <li>Next: <a href="arxiv.base.urls.tests.html" title="next chapter">arxiv.base.urls.tests package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, arXiv Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/arxiv/arxiv.base.urls.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>